# Базовый образ: Node.js 20 на основе Debian Bullseye (стабильная и лёгкая система)
FROM node:20-bullseye

# Рабочая директория внутри контейнера
WORKDIR /usr/src/renter

# Копируем файлы package.json и package-lock.json для установки зависимостей
COPY package*.json ./

# Устанавливаем только продакшен-зависимости (dev-зависимости не нужны в проде)
RUN npm ci --omit=dev

# Копируем весь исходный код проекта внутрь контейнера
COPY . .

# Открываем порт 3000 для доступа к Node.js приложению
EXPOSE 3000

# Команда запуска приложения (production режим, без авто-перезапуска)
CMD ["node", "index.js"]

